<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>Data science tutorials: Hierarchical clustering -- Which states in Nigeria have similar expenditure profile?</title>

<meta property="description" itemprop="description" content="Clustering analysis is popular unsupervised machine &#10;learning techniques that categorize data into groups of similarity."/>

<link rel="canonical" href="https://addurl/posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-07-18"/>
<meta property="article:created" itemprop="dateCreated" content="2022-07-18"/>
<meta name="article:author" content="Linus Agbleze"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Data science tutorials: Hierarchical clustering -- Which states in Nigeria have similar expenditure profile?"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Clustering analysis is popular unsupervised machine &#10;learning techniques that categorize data into groups of similarity."/>
<meta property="og:url" content="https://addurl/posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/"/>
<meta property="og:image" content="https://addurl/posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/customize-dendro-1.png"/>
<meta property="og:image:width" content="1536"/>
<meta property="og:image:height" content="1152"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Data science tutorials"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Data science tutorials: Hierarchical clustering -- Which states in Nigeria have similar expenditure profile?"/>
<meta property="twitter:description" content="Clustering analysis is popular unsupervised machine &#10;learning techniques that categorize data into groups of similarity."/>
<meta property="twitter:url" content="https://addurl/posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/"/>
<meta property="twitter:image" content="https://addurl/posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/customize-dendro-1.png"/>
<meta property="twitter:image:width" content="1536"/>
<meta property="twitter:image:height" content="1152"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","draft","categories","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Hierarchical clustering -- Which states in Nigeria have similar expenditure profile?"]},{"type":"character","attributes":{},"value":["Clustering analysis is popular unsupervised machine \nlearning techniques that categorize data into groups of similarity."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Linus Agbleze"]},{"type":"character","attributes":{},"value":["https://agbleze.github.io/Portfolio/"]}]}]},{"type":"character","attributes":{},"value":["2022-07-18"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["Unsupervised learning"]},{"type":"character","attributes":{},"value":["https://addurl/posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/anchor-4.2.2/anchor.min.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/bowser-1.9.3/bowser.min.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/crosstalk-1.1.1/css/crosstalk.css","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/crosstalk-1.1.1/js/crosstalk.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/crosstalk-1.1.1/js/crosstalk.js.map","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/crosstalk-1.1.1/js/crosstalk.min.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/crosstalk-1.1.1/js/crosstalk.min.js.map","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/datatables-binding-0.18/datatables.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/datatables-css-0.0.0/datatables-crosstalk.css","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/distill-2.2.21/template.v2.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/dt-core-1.10.20/css/jquery.dataTables.extra.css","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/dt-core-1.10.20/css/jquery.dataTables.min.css","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/dt-core-1.10.20/js/jquery.dataTables.min.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-comp-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-comp-2.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-2.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-3.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-4.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-5.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-6.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/customize-dendro-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/divisive-hcl-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/elbow-method-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/fan-dendrogram-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/gap-stat-method-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/hcl-complete-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/hcl-methods-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/hcl-methods-2.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/hcl-methods-3.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/silhoutte-method-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/tangle-plot-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/viz-clust-1.png","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/header-attrs-2.14/header-attrs.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/htmlwidgets-1.5.3/htmlwidgets.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/jquery-3.6.0/jquery-3.6.0.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/jquery-3.6.0/jquery-3.6.0.min.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/jquery-3.6.0/jquery-3.6.0.min.map","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/popper-2.6.0/popper.min.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/tippy-6.2.7/tippy-bundle.umd.min.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/tippy-6.2.7/tippy-light-border.css","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/tippy-6.2.7/tippy.css","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/tippy-6.2.7/tippy.umd.min.js","hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/webcomponents-2.0.0/webcomponents.js","sect8b_plantingw3.csv","sect8c_plantingw3.csv"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      if ($(this).children()[0].nodeName == "D-FOOTNOTE") {
        var fn = $(this).children()[0]
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.14/header-attrs.js"></script>
  <script src="../../site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
  <script src="../../site_libs/datatables-binding-0.18/datatables.js"></script>
  <link href="../../site_libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
  <link href="../../site_libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
  <script src="../../site_libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
  <link href="../../site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
  <script src="../../site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Hierarchical clustering -- Which states in Nigeria have similar expenditure profile?","description":"Clustering analysis is popular unsupervised machine \nlearning techniques that categorize data into groups of similarity.","authors":[{"author":"Linus Agbleze","authorURL":"https://agbleze.github.io/Portfolio/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-07-18T00:00:00.000+02:00","citationText":"Agbleze, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<span class="logo">
<img src="../../images/image.png"/>
</span>
<a href="../../index.html" class="title">Data science tutorials</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="../../index.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Hierarchical clustering – Which states in Nigeria have similar expenditure profile?</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:Unsupervised_learning" class="dt-tag">Unsupervised learning</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>Clustering analysis is popular unsupervised machine learning techniques that categorize data into groups of similarity.</p></p>
</div>

<div class="d-byline">
  Linus Agbleze <a href="https://agbleze.github.io/Portfolio/" class="uri">https://agbleze.github.io/Portfolio/</a> 
  
<br/>2022-07-18
</div>

<div class="d-article">
<h2 id="introduction-to-clustering-analysis">Introduction to clustering analysis</h2>
<p>Clustering analysis is one of the important exploratory data analysis you will consider undertaking in order to identify groupings in your dataset. It belongs to the segment of unsupervised classification which draws the data into clusters of similarity. Infact, many classification schemes have this underpinning of classifying a large set of individual elements or observations into a small number of classes. Talk of species classification, the periodic table, development index among others. Remember, it is groups of similarity. This notion also runs in business or rather dominates business decisions. Differential pricing, product and market segmentation among others require identifying the different groups present and tailoring policies that best serve each of them. So clustering analysis is important there!</p>
<p>That being said, there are typically two set of clustering techniques that are use to identify groups of similarity. Namely;</p>
<ul>
<li>Hierarchical clustering</li>
<li>K-means clustering</li>
</ul>
<p>In order to do a little deep dive, we will take them in turns. This tutorial will focus on hierarchical clustering where a tree structure is produce for the clusters – dendrograms.</p>
<h2 id="hierarchical-clustering-analysis">Hierarchical clustering analysis</h2>
<p>Hierarchical clustering is of two types; agglomerative nesting and divisive analysis. The two are oppose in terms of where formation of clusters begin from.</p>
<ul>
<li><p>Agglomerative Nesting (AGNES) merges similar clusters beginning from the bottom-most, into nodes and in a sequential manner continue merging them until all clusters form a single root at the top of the tree.</p></li>
<li><p>Divisive clustering also known as DIANA (Divise Analysis) runs in opposite direction to AGNES. The algorithm starts by disaggregating the root cluster, which is the single cluster containing all other clusters, into dissimilar clusters at each step (with each cluster being internally similar) until all the dissimilarity between clusters are completely exhausted. Thus, it ends with the leafs, which are clusters at the bottom, entirely dissimilar to each other.</p></li>
</ul>
<p><strong>So AGNES adds up similar cluster leafs to form a cluster node and then a root while DIANA divides a single cluster root into dissimilar cluster nodes and then finally cluster leafs. Thus, AGNES is favoured for finding small clusters while DIANA works well for large clusters.</strong></p>
<h4 id="workflow-for-hierarchical-clustering-analysis">Workflow for hierarchical clustering analysis</h4>
<p>In order to undertake hierarchical clustering, the data has to be cleaned and prepared for that purpose such that variables are comparable. This involve the following;</p>
<ul>
<li>Data wraggling and transformation that results in a tidy data such that;
<ul>
<li>Each column is a variable</li>
<li>Each row is a recording or observation</li>
<li>Each cell is a data</li>
</ul></li>
<li>Standardizing / scaling the data</li>
<li>Calculating dissimilarity measure between clusters</li>
</ul>
<p>In measuring dissimilarity between clusters, different methods can be use and are required to be specified when using AGNES. The methods are identified as follows;</p>
<ul>
<li><p>Maximum / complete linkage: uses the highest dissimilarity found between clusters after pairwise calculation of dissimilarities of elements in different clusters.</p></li>
<li><p>Minimum / single linkage: uses the least dissimilarity between clusters following similar method as complete linkage in calculating dissimilarity</p></li>
<li><p>Mean / average linkage: as the name suggests, uses average dissimilarity as distance between clusters after computing pairwise dissimilarity between observations in different clusters.</p></li>
<li><p>Centroid linkage: based on the dissimilarity between the centroid of clusters.</p></li>
<li><p>Ward’s minimum variance: focuses on minimizing inward cluster difference by merging groups with least between-cluster distance.</p></li>
</ul>
<p>The best way to understand the workflow and methods identified for computing hierarchical clustering is by practicing with a project. We are going to define a simple research that clustering analysis can be used for and go through the complete pipeline required to execute it.</p>
<p>So let’s take a break from the long discussion and start with practicals.</p>
<h2 id="research-objective">Research objective</h2>
<ul>
<li>To identify states in Nigeria with similar expenditure profile on petrol, kerosene and health (excluding insurance)</li>
</ul>
<h2 id="dataset">Dataset</h2>
<p>The dataset to be used for this tutorial is Living Standard Measurement Study (LSMS) for Nigeria. Specifically, we will use the General Household Survey, 2015-2016 Panel data which is the Wave 3. The dataset can be accessed from (<a href="https://microdata.worldbank.org/index.php/catalog/2734/related-materials" class="uri">https://microdata.worldbank.org/index.php/catalog/2734/related-materials</a>).</p>
<h4 id="know-the-metadata-of-your-data">Know the Metadata of your data</h4>
<p>As part of most data science projects in the real world, background checks has to be done even before data exploration and analysis. We have covered our first step which is accessing the data. The data can even be provided to us by our client or project partner or whoever we are working for. But one thing that we will have to do ourselves is to familiarize ourselves with variable names used, questionnaire administered and its design, how data was collected, units of measurement for the various variables among several others. Understanding these elements will influence how we explore the data, organize it in terms of merging datasets and variables, and analyze it.</p>
<p>To do this for our dataset, we need to look at the documentation of the dataset which is also available on the site (<a href="https://microdata.worldbank.org/index.php/catalog/2734/data-dictionary" class="uri">https://microdata.worldbank.org/index.php/catalog/2734/data-dictionary</a>).</p>
<p>After familiarizing ourselves with the metadata files, it is clear that the variables we want to analyze are in two different files namely sect8b_plantingw3.csv (contains expenditure on various fuels including kerosene and petrol among others) and sect8c_plantingw3.csv (contains expenditure on health). The dataset create opportunity for us to learn key skills of data wrangling and transformation before the actual clustering analysis. This is typical of many projects.</p>
<h4 id="project-tasks">Project Tasks</h4>
<ul>
<li>Data wrangling and transformation
<ul>
<li>Subseting dataset</li>
<li>filtering dataset</li>
<li>grouping dataset</li>
<li>summarizing</li>
</ul></li>
<li>Scaling dataset</li>
<li>Hierarchical clustering
<ul>
<li>AGNES clustering</li>
<li>DIANA clustering</li>
</ul></li>
<li>Determining optimal clusters</li>
<li>Customizing visualization of clusters</li>
</ul>
<h4 id="packages-and-libraries">Packages and libraries</h4>
<p>Now that we know the tasks we will be undertaking, we have to install (if not already installed) and load the libraries needed</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## install librabries if not already available</span></span>
<span><span class='co'>### I have commented the code for installation because I have already installed them</span></span>
<span><span class='co'># install.packages("tidyverse")</span></span>
<span><span class='co'># install.packages("cluster")</span></span>
<span><span class='co'># install.packages("factoextra")</span></span>
<span><span class='co'># install.packages("dendextend")</span></span>
<span><span class='co'># install.packages("DT")</span></span>
<span><span class='co'># install.packages("skimr")</span></span>
<span><span class='co'># install.packages("dplyr")</span></span>
<span><span class='co'># install.packages("dendextend")</span></span>
<span><span class='co'># install.packages("ape")</span></span>
<span></span>
<span><span class='co'>## load librabries</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readr.tidyverse.org'>readr</a></span><span class='op'>)</span>  <span class='co'>## to read csv file</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span> <span class='co'>## to tidy the data</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://svn.r-project.org/R-packages/trunk/cluster/'>cluster</a></span><span class='op'>)</span> <span class='co'>##  for cluster analysis</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://www.sthda.com/english/rpkgs/factoextra'>factoextra</a></span><span class='op'>)</span> <span class='co'>## to visualize clusters</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://talgalili.github.io/dendextend/'>dendextend</a></span><span class='op'>)</span>  <span class='co'>## to compare dendrograms</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>stats</span><span class='op'>)</span>  <span class='co'>## for statistical analysis</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/rstudio/DT'>DT</a></span><span class='op'>)</span>  <span class='co'>## to present beautiful tables</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/skimr/'>skimr</a></span><span class='op'>)</span>  <span class='co'>## for quick descriptive view of the dataset</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://ape-package.ird.fr/'>ape</a></span><span class='op'>)</span>  <span class='co'>## to visualize dendrograms</span></span></code></pre>
</div>
</div>
<h4 id="reading-the-dataset">Reading the dataset</h4>
<p>The first thing to do is to import the dataset (hopefully you have downloaded them) and get a general understanding of it. This can be achieve with the code below</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>fuel_expenditure</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv</a></span><span class='op'>(</span><span class='st'>"sect8b_plantingw3.csv"</span><span class='op'>)</span>  <span class='co'>## load the dataset</span></span>
<span><span class='va'>health_expenditure</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_csv</a></span><span class='op'>(</span><span class='st'>"sect8c_plantingw3.csv"</span><span class='op'>)</span> <span class='co'>## load the dataset</span></span>
<span></span>
<span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>fuel_expenditure</span><span class='op'>)</span>  <span class='co'>## get data summary</span></span></code></pre>
</div>
<table>
<caption><span id="tab:data-load">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">fuel_expenditure</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">137729</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">item_desc</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">zone</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.52</td>
<td style="text-align: right;">1.71</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">▇▅▅▅▅</td>
</tr>
<tr class="even">
<td style="text-align: left;">state</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">18.57</td>
<td style="text-align: right;">10.36</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">37</td>
<td style="text-align: left;">▇▆▇▇▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lga</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1868.92</td>
<td style="text-align: right;">1035.81</td>
<td style="text-align: right;">102</td>
<td style="text-align: right;">1001</td>
<td style="text-align: right;">1921</td>
<td style="text-align: right;">2806</td>
<td style="text-align: right;">3706</td>
<td style="text-align: left;">▇▆▇▇▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">sector</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.68</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">▃▁▁▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ea</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">993.11</td>
<td style="text-align: right;">932.12</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">330</td>
<td style="text-align: right;">760</td>
<td style="text-align: right;">1390</td>
<td style="text-align: right;">7586</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">hhid</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">185571.19</td>
<td style="text-align: right;">103683.68</td>
<td style="text-align: right;">10001</td>
<td style="text-align: right;">90124</td>
<td style="text-align: right;">190093</td>
<td style="text-align: right;">280038</td>
<td style="text-align: right;">370040</td>
<td style="text-align: left;">▇▆▇▇▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">item_cd</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">315.50</td>
<td style="text-align: right;">8.66</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">308</td>
<td style="text-align: right;">315</td>
<td style="text-align: right;">323</td>
<td style="text-align: right;">330</td>
<td style="text-align: left;">▇▇▇▇▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">s8q3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.82</td>
<td style="text-align: right;">0.39</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">▂▁▁▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">s8q4</td>
<td style="text-align: right;">112727</td>
<td style="text-align: right;">0.18</td>
<td style="text-align: right;">1911.06</td>
<td style="text-align: right;">43304.31</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">250</td>
<td style="text-align: right;">600</td>
<td style="text-align: right;">1500</td>
<td style="text-align: right;">6584185</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://docs.ropensci.org/skimr/reference/skim.html'>skim</a></span><span class='op'>(</span><span class='va'>health_expenditure</span><span class='op'>)</span> <span class='co'>## get data summary</span></span></code></pre>
</div>
<table>
<caption><span id="tab:data-load">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">health_expenditure</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">188230</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">item_desc</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">zone</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3.52</td>
<td style="text-align: right;">1.71</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">▇▅▅▅▅</td>
</tr>
<tr class="even">
<td style="text-align: left;">state</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">18.57</td>
<td style="text-align: right;">10.36</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">37</td>
<td style="text-align: left;">▇▆▇▇▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">lga</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1868.92</td>
<td style="text-align: right;">1035.80</td>
<td style="text-align: right;">102</td>
<td style="text-align: right;">1001</td>
<td style="text-align: right;">1921</td>
<td style="text-align: right;">2806</td>
<td style="text-align: right;">3706</td>
<td style="text-align: left;">▇▆▇▇▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">sector</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.68</td>
<td style="text-align: right;">0.47</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">▃▁▁▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ea</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">993.11</td>
<td style="text-align: right;">932.12</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">330</td>
<td style="text-align: right;">760</td>
<td style="text-align: right;">1390</td>
<td style="text-align: right;">7586</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">hhid</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">185571.20</td>
<td style="text-align: right;">103683.48</td>
<td style="text-align: right;">10001</td>
<td style="text-align: right;">90124</td>
<td style="text-align: right;">190093</td>
<td style="text-align: right;">280038</td>
<td style="text-align: right;">370040</td>
<td style="text-align: left;">▇▆▇▇▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">item_cd</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">421.00</td>
<td style="text-align: right;">11.83</td>
<td style="text-align: right;">401</td>
<td style="text-align: right;">411</td>
<td style="text-align: right;">421</td>
<td style="text-align: right;">431</td>
<td style="text-align: right;">441</td>
<td style="text-align: left;">▇▇▇▇▇</td>
</tr>
<tr class="even">
<td style="text-align: left;">s8q5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.84</td>
<td style="text-align: right;">0.36</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">▂▁▁▁▇</td>
</tr>
<tr class="odd">
<td style="text-align: left;">s8q6</td>
<td style="text-align: right;">158505</td>
<td style="text-align: right;">0.16</td>
<td style="text-align: right;">2822.90</td>
<td style="text-align: right;">6896.99</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">580</td>
<td style="text-align: right;">1500</td>
<td style="text-align: right;">3000</td>
<td style="text-align: right;">300000</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
<p>The skim() function gives us an overview of the dataset. It shows that there are 10 columns in both the fuel_expenditure and health_expenditure data objects. Among others, it gives the mean and number of missing cases for each variable. Depending on the type of variable, that is whether character or numeric, we get different type of summary. Some of the variables are not in their right data type format. Example, zone, state and lga are numeric instead of being character but that is not the focus here. The variable s8q4 from fuel_expenditure data object has 112727 missing records.</p>
<p>We keep saying the variable and that brings up the question, what does the variable actually mean? This is where our earlier exercise of viewing the metadata plays its role. If we indeed went through the various documentations and questionnaire that comes with the data, we will realize that variable s8q4 (fuel_expenditure data) represents household monthly expenditure measured in Naire for various items identified in item_desc variable. Likewise, s8q6 (health_expenditure data) represents expenditure for items but this time round it covers 6 month duration.</p>
<p>Our dataset is quite large to be viewed in a table nicely and adequately; so we will subset the first 100 rows (remember rows are individual records or observations) and show them in an interactive table using the datatable() function from DT package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/DT/man/datatable.html'>datatable</a></span><span class='op'>(</span><span class='va'>fuel_expenditure</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span>, <span class='op'>]</span><span class='op'>)</span>  <span class='co'>## view the first 100 observations in fuel_expenditure data</span></span></code></pre>
</div>
<div id="htmlwidget-22fa06b08c4be320d0eb" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-22fa06b08c4be320d0eb">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670],[10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10004,10004,10004,10004,10004,10004,10004,10004,10004,10004],[301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,301,302,303,304,305,306,307,308,309,310],["KEROSENE","PALM KERNEL OIL","GAS","OTHER LIQUID COOKING FUEL","ELECTRICITY","CANDLES","FIREWOOD","CHARCOAL","PETROL","DIESEL","LIGHT BULBS/GLOBES","WATER","SOAP AND WASHING POWDER","TOILET PAPER","PERSONAL CARE GOODS","VITAMIN SUPLEMENTS","INSECTICIDES, DISINFECTANT AND","POSTAL","RECHARGE CARDS","LANDLINE CHARGES","INTERNET SERVICES","RECREATIONAL","MOTOR VEHICLE SERVICE, REPAIR,","BICYCLE SERVICE, REPAIR, OR","WAGES PAID TO STAFF/MAID/LAWNS","MORTGAGE - REGULAR PAYMENT","REPAIRS &amp; MAINTENANCE TO DWELL","REPAIRS TO HOUSEHOLD AND PERSO","HOUSE RENT","LUBRICANTS","KEROSENE","PALM KERNEL OIL","GAS","OTHER LIQUID COOKING FUEL","ELECTRICITY","CANDLES","FIREWOOD","CHARCOAL","PETROL","DIESEL","LIGHT BULBS/GLOBES","WATER","SOAP AND WASHING POWDER","TOILET PAPER","PERSONAL CARE GOODS","VITAMIN SUPLEMENTS","INSECTICIDES, DISINFECTANT AND","POSTAL","RECHARGE CARDS","LANDLINE CHARGES","INTERNET SERVICES","RECREATIONAL","MOTOR VEHICLE SERVICE, REPAIR,","BICYCLE SERVICE, REPAIR, OR","WAGES PAID TO STAFF/MAID/LAWNS","MORTGAGE - REGULAR PAYMENT","REPAIRS &amp; MAINTENANCE TO DWELL","REPAIRS TO HOUSEHOLD AND PERSO","HOUSE RENT","LUBRICANTS","KEROSENE","PALM KERNEL OIL","GAS","OTHER LIQUID COOKING FUEL","ELECTRICITY","CANDLES","FIREWOOD","CHARCOAL","PETROL","DIESEL","LIGHT BULBS/GLOBES","WATER","SOAP AND WASHING POWDER","TOILET PAPER","PERSONAL CARE GOODS","VITAMIN SUPLEMENTS","INSECTICIDES, DISINFECTANT AND","POSTAL","RECHARGE CARDS","LANDLINE CHARGES","INTERNET SERVICES","RECREATIONAL","MOTOR VEHICLE SERVICE, REPAIR,","BICYCLE SERVICE, REPAIR, OR","WAGES PAID TO STAFF/MAID/LAWNS","MORTGAGE - REGULAR PAYMENT","REPAIRS &amp; MAINTENANCE TO DWELL","REPAIRS TO HOUSEHOLD AND PERSO","HOUSE RENT","LUBRICANTS","KEROSENE","PALM KERNEL OIL","GAS","OTHER LIQUID COOKING FUEL","ELECTRICITY","CANDLES","FIREWOOD","CHARCOAL","PETROL","DIESEL"],[1,2,2,2,1,2,2,2,1,2,2,1,1,1,2,2,1,2,1,2,2,2,2,2,1,2,2,2,2,1,1,2,1,2,1,2,2,2,1,2,1,2,1,1,1,1,1,2,1,2,2,2,1,2,2,2,1,2,2,1,1,2,2,2,1,2,2,2,1,2,2,2,1,1,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,1,2,2,2,1,2],[1700,null,null,null,2200,null,null,null,3200,null,null,200,450,200,null,null,350,null,1200,null,null,null,null,null,12000,null,null,null,null,750,2000,null,4200,null,5200,null,null,null,3500,null,500,null,700,1000,1500,3800,1000,null,3000,null,null,null,25000,null,null,null,10000,null,null,700,3400,null,null,null,4500,null,null,null,4000,null,null,null,2500,1500,2000,null,null,null,5000,null,null,null,null,null,null,null,null,null,null,null,4000,null,null,null,4500,null,null,null,5000,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>zone<\/th>\n      <th>state<\/th>\n      <th>lga<\/th>\n      <th>sector<\/th>\n      <th>ea<\/th>\n      <th>hhid<\/th>\n      <th>item_cd<\/th>\n      <th>item_desc<\/th>\n      <th>s8q3<\/th>\n      <th>s8q4<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<p>The fuel_expenditure table above shows that we have more variables than needed for our analysis as we are only interested in Petrol and Kerosene captured in the item_desc variable. Moreover, the variable names are not understandable. So just by viewing the table, we will realize that some data wrangling tasks await us. The same can be said for the health_expenditure data object.</p>
<p>Let’s view the first 100 rows of health_expenditure data.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/DT/man/datatable.html'>datatable</a></span><span class='op'>(</span><span class='va'>health_expenditure</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>100</span>, <span class='op'>]</span><span class='op'>)</span> <span class='co'>## view the health_expenditure data </span></span></code></pre>
</div>
<div id="htmlwidget-ab093b0be32cc093845c" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ab093b0be32cc093845c">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100"],[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115,115],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670,670],[10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10001,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10002,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003,10003],[401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418],["INFANT CLOTHING","BABY NAPPIES/DIAPERS","BOYS TAILORED CLOTHES","BOYS DRESS (READY MADE)","GIRLS TAILORED CLOTHES","GIRLS DRESS (READY MADE)","MEN TAILORED CLOTHES","MEN DRESS (READY MADE)","WOMEN TAILORED CLOTHES","WOMEN DRESS (READY MADE)","ANKARA, GEORGE MATERIALS","OTHER CLOTHING MATERIALS","BOY'S SHOES","MEN'S SHOES","GIRL'S SHOES","LADY'S SHOES","TAILORING CHARGES","LAUNDRY AND DRY CLEANING","BOWLS, GLASSWARE, PLATES, SILV","COOKING UTENSILS (COOKPOTS, ST","CLEANING UTENSILS (BROOMS, BRU","TORCH / FLASHLIGHT","UMBRELLA AND RAINCOAT","PARAFFIN LAMP (HURRICANE OR PR","STATIONERY ITEMS (NOT FOR SCHO","BOOKS (NOT FOR SCHOOL)","HOUSE DECORATIONS","NIGHT'S LODGING IN REST HOUSE","DONATIONS TO CHURCH, MOSQUE, O","HEALTH EXPENDITURES (EXCLUDING","HAND LOOMED: ASO-OKE","REPAIRS OF FOOTWEAR","ELECTRIC KETTLE","COAL POT/OTHER NON-ELECTRIC AP","REPAIRS OF APPLIANCES","BED SHEETS, BED COVER, BLANKET","PILLOW","CURTAIN AND OTHER LINEN","CARPET AND OTHER FLOOR COVERIN","CELL PHONE HAND SET","PERSONAL COMPTURE","INFANT CLOTHING","BABY NAPPIES/DIAPERS","BOYS TAILORED CLOTHES","BOYS DRESS (READY MADE)","GIRLS TAILORED CLOTHES","GIRLS DRESS (READY MADE)","MEN TAILORED CLOTHES","MEN DRESS (READY MADE)","WOMEN TAILORED CLOTHES","WOMEN DRESS (READY MADE)","ANKARA, GEORGE MATERIALS","OTHER CLOTHING MATERIALS","BOY'S SHOES","MEN'S SHOES","GIRL'S SHOES","LADY'S SHOES","TAILORING CHARGES","LAUNDRY AND DRY CLEANING","BOWLS, GLASSWARE, PLATES, SILV","COOKING UTENSILS (COOKPOTS, ST","CLEANING UTENSILS (BROOMS, BRU","TORCH / FLASHLIGHT","UMBRELLA AND RAINCOAT","PARAFFIN LAMP (HURRICANE OR PR","STATIONERY ITEMS (NOT FOR SCHO","BOOKS (NOT FOR SCHOOL)","HOUSE DECORATIONS","NIGHT'S LODGING IN REST HOUSE","DONATIONS TO CHURCH, MOSQUE, O","HEALTH EXPENDITURES (EXCLUDING","HAND LOOMED: ASO-OKE","REPAIRS OF FOOTWEAR","ELECTRIC KETTLE","COAL POT/OTHER NON-ELECTRIC AP","REPAIRS OF APPLIANCES","BED SHEETS, BED COVER, BLANKET","PILLOW","CURTAIN AND OTHER LINEN","CARPET AND OTHER FLOOR COVERIN","CELL PHONE HAND SET","PERSONAL COMPTURE","INFANT CLOTHING","BABY NAPPIES/DIAPERS","BOYS TAILORED CLOTHES","BOYS DRESS (READY MADE)","GIRLS TAILORED CLOTHES","GIRLS DRESS (READY MADE)","MEN TAILORED CLOTHES","MEN DRESS (READY MADE)","WOMEN TAILORED CLOTHES","WOMEN DRESS (READY MADE)","ANKARA, GEORGE MATERIALS","OTHER CLOTHING MATERIALS","BOY'S SHOES","MEN'S SHOES","GIRL'S SHOES","LADY'S SHOES","TAILORING CHARGES","LAUNDRY AND DRY CLEANING"],[2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,2,1,1,2,2,1,2,2,2,2,2,2,1,2,1,1,2,1,2,1,2,2,2,1,1,1,1,1,1,1,2,1,2,2,1,2,2,2,2,2,2,1,1,1,2,1,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,1,2,1,2,2,2,1,2,2,2,1,1],[null,null,null,null,null,null,null,null,null,null,4200,null,null,null,null,null,null,null,null,5000,500,2000,null,null,null,null,null,null,25000,30000,null,null,4500,null,null,null,null,null,null,10000,null,6000,6500,null,4000,null,10000,null,null,null,15000,4200,5000,2000,5000,2000,3500,null,1500,null,null,300,null,null,null,null,null,null,16000,50000,7000,null,500,null,null,null,null,null,null,null,15000,null,null,null,null,null,null,null,4500,null,1500,null,null,null,2000,null,null,null,1000,2000]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>zone<\/th>\n      <th>state<\/th>\n      <th>lga<\/th>\n      <th>sector<\/th>\n      <th>ea<\/th>\n      <th>hhid<\/th>\n      <th>item_cd<\/th>\n      <th>item_desc<\/th>\n      <th>s8q5<\/th>\n      <th>s8q6<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7,9,10]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<h2 id="data-wrangling-and-transformation">Data wrangling and transformation</h2>
<p>We have imported and viewed our dataset successfully and now we have to clean, and transform our data to the required format for analysis. Data wrangling and transformation activities are not a cast in a stone despite some activities are very common. The type and structure of dataset and analysis we want to perform determines what we need to do.</p>
<p>Looking at our dataset, we need to reduce it to only columns that we are interested in, add some new columns with transformed data and clean out the missing data. We will be utilizing piping approach (%&gt;%) to harness its benefit of logical and clear flow of analysis. This can be achieve with the code below for fuel_expenditure.</p>
<div class="layout-chunk" data-layout="l-body">
<div id="htmlwidget-54f825f0f23adbc94707" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-54f825f0f23adbc94707">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,24,24,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,24,24,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],["KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","PETROL","PETROL","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","PETROL","PETROL","PETROL","KEROSENE","KEROSENE","PETROL","PETROL","PETROL","PETROL","PETROL","KEROSENE","KEROSENE","PETROL","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","PETROL","KEROSENE","KEROSENE","PETROL","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE","KEROSENE"],[1700,3200,2000,3500,3400,4000,4000,5000,2700,5000,2000,5000,1200,5000,2000,10000,1000,8000,400,400,2000,2500,2500,700,1000,4000,600,8000,650,200,10000,150,600,500,1000,220,600,150,800,1000,500,2800,3000,3000,1600,1500,1000,1350,2800,3000,6000,1000,2000,4500,2500,500,6400,1500,8000,500,2500,1500,6000,2000,1700,1500,1400,2400,1500,1300,800,700,4000,3000,3000,4000,1700,3000,1040,15000,600,400,1200,200,2500,500,3000,300,2000,1000,2500,2000,500,500,1000,500,1000,100,400,600,700,700,3500,140,800,2600,650,700,150,450,700,200,700,2000,200,150,1700,80,150,500,700,650,500,600,400,900,500,3000,100,200,300,150,500,500,3000,50,300,600,1200,3000,140,750,2750,320,650,500,1200,1200,1500,150,250,4500,2250,1200,3000,200,50,2000,2500,900,500,2000,1500,6000,700,19400,150,3000,500,500,2500,1200,200,2000,10000,1700,700,1300,4200,2800,2000,3000,20000,1500,5000,900,5000,2000,10000,1500,3500,6000,2600,4500,1500,2000,1000,500,2040,1000]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>state<\/th>\n      <th>item_desc<\/th>\n      <th>s8q4<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Now, we have reduced the data to only variables needed. Yet, it is obvious there is still work to be done. First of all, the varaible <strong>“state”</strong> has meaningless numbers instead of names of states in Nigeria. This was useful for data collection and data entry but not our analysis where audience have to know state names explicitely. How do we know exactly what these numbers represent? Again, this is where our metadata exploration comes to our rescue. When we reviewed the documentation that came with the data, we realized that under <strong>“state code”</strong>, the corresponding state names are provided. With this, we can add a new column that has the corresponding state names.</p>
<p>Another issue to note, which also influences how to transform our data is that, the number of observations recorded for each state varies. This has to do with the sampling technique used during data collection in order to achieve good representativeness. We want to make sure that, the states are comparable in terms of expenditure. So instead of summarizing base on the total expenditure for each state, we will do so based on the mean. With that, we will see mean expenditure of state and not sum of households. In order to captured this as our labeling when we do the clustering analysis, we will convert the column of state names to row names.</p>
<p>Now, let’s code all that we have discussed so far.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>fuel_expenditure_transformed</span> <span class='op'>&lt;-</span> <span class='va'>fuel_expenditure_transformed</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>state_names <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/case_when.html'>case_when</a></span><span class='op'>(</span>  <span class='co'>## add a new column containing state names</span></span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>1</span> <span class='op'>~</span> <span class='st'>"Abia"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>2</span> <span class='op'>~</span> <span class='st'>"Adamawa"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>3</span> <span class='op'>~</span> <span class='st'>"Akwa Ibom"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>4</span> <span class='op'>~</span> <span class='st'>"Anambra"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>5</span> <span class='op'>~</span> <span class='st'>"Bauchi"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>6</span> <span class='op'>~</span> <span class='st'>"Bayelsa"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>7</span> <span class='op'>~</span> <span class='st'>"Benue"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>8</span> <span class='op'>~</span> <span class='st'>"Borno"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>9</span> <span class='op'>~</span> <span class='st'>"Cross River"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>10</span> <span class='op'>~</span> <span class='st'>"Delta"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>11</span> <span class='op'>~</span> <span class='st'>"Ebonyi"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>12</span> <span class='op'>~</span> <span class='st'>"Edo"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>13</span> <span class='op'>~</span> <span class='st'>"Ekiti"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>14</span> <span class='op'>~</span> <span class='st'>"Enugu"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>15</span> <span class='op'>~</span> <span class='st'>"Gombe"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>16</span> <span class='op'>~</span> <span class='st'>"Imo"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>17</span> <span class='op'>~</span> <span class='st'>"Jigawa"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>18</span> <span class='op'>~</span> <span class='st'>"Kaduna"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>19</span> <span class='op'>~</span> <span class='st'>"Kano"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>20</span> <span class='op'>~</span> <span class='st'>"Katsina"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>21</span> <span class='op'>~</span> <span class='st'>"Kebbi"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span><span class='fl'>22</span> <span class='op'>~</span> <span class='st'>"Kogi"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>23</span> <span class='op'>~</span> <span class='st'>"Kwara"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>24</span> <span class='op'>~</span> <span class='st'>"Lagos"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>25</span> <span class='op'>~</span> <span class='st'>"Nasarawa"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>26</span> <span class='op'>~</span> <span class='st'>"Niger"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>27</span> <span class='op'>~</span> <span class='st'>"Ogun"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>28</span> <span class='op'>~</span> <span class='st'>"Ondo"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>29</span> <span class='op'>~</span> <span class='st'>"Osun"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>30</span> <span class='op'>~</span> <span class='st'>"Oyo"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>31</span> <span class='op'>~</span> <span class='st'>"Plateau"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>32</span> <span class='op'>~</span> <span class='st'>"Rivers"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>33</span> <span class='op'>~</span> <span class='st'>"Sokoto"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>34</span> <span class='op'>~</span> <span class='st'>"Taraba"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>35</span> <span class='op'>~</span> <span class='st'>"Yobe"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>36</span> <span class='op'>~</span> <span class='st'>"Zamfara"</span>, </span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>37</span> <span class='op'>~</span> <span class='st'>"FCT Abuja"</span><span class='op'>)</span></span>
<span>   <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>tidyr</span><span class='fu'>::</span><span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_wider.html'>pivot_wider</a></span><span class='op'>(</span>names_from <span class='op'>=</span> <span class='va'>item_desc</span>, values_from <span class='op'>=</span> <span class='va'>s8q4</span>, values_fn <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/DT/man/datatable.html'>datatable</a></span><span class='op'>(</span><span class='va'>fuel_expenditure_transformed</span><span class='op'>)</span></span></code></pre>
</div>
<div id="htmlwidget-5a2037164be2ad4f63b0" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5a2037164be2ad4f63b0">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37"],[1,4,24,3,2,11,9,5,34,31,6,22,7,8,25,10,12,13,14,26,15,16,32,17,23,18,19,36,20,21,29,27,28,33,30,37,35],["Abia","Anambra","Lagos","Akwa Ibom","Adamawa","Ebonyi","Cross River","Bauchi","Taraba","Plateau","Bayelsa","Kogi","Benue","Borno","Nasarawa","Delta","Edo","Ekiti","Enugu","Niger","Gombe","Imo","Rivers","Jigawa","Kwara","Kaduna","Kano","Zamfara","Katsina","Kebbi","Osun","Ogun","Ondo","Sokoto","Oyo","FCT Abuja","Yobe"],[1061.59574468085,1078.50515463918,924.621212121212,1425.44117647059,529.166666666667,523.776978417266,717.173913043478,564.230769230769,456.086956521739,522,1139.18367346939,652.554347826087,348.5,678.571428571429,705,915.097345132743,877.349397590361,734.366666666667,620.630630630631,341.428571428571,689.473684210526,697.183908045977,1274.94505494505,1258.5,630.909090909091,563.378378378378,633.695652173913,361.643835616438,446.666666666667,244.117647058824,819.857142857143,870.210526315789,870.978260869565,219.2,981.875,1825,260],[3781.11111111111,2523.15789473684,4760.30303030303,5087.40740740741,3290,2948.07692307692,4168.18181818182,2161.53846153846,2039.18918918919,4387.74193548387,4690.90909090909,2704.73684210526,2243,3338.63636363636,3622.5,4392.19512195122,2893.47826086957,4342.5,3452.4,2855.2380952381,8012.28571428571,2647.95454545455,3605.61224489796,1865.51724137931,3648.52941176471,2403.22580645161,2691.37931034483,1092.55319148936,3990.71428571429,3073.81395348837,3907.27272727273,4548.97959183673,6020.17543859649,7411.11111111111,6099.775,10010,3400]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>state<\/th>\n      <th>state_names<\/th>\n      <th>KEROSENE<\/th>\n      <th>PETROL<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<p>After cleaning and transforming fuel_expenditure data, we need to make sure that the second data is also transform to be at the same quality level or format. Remember that health_expenditure is for 6 months which means that in order to analyze both data properly for the same time scale, we need to convert it to monthly data and then calculate the mean.</p>
<p>The code to transform health expenditure data to required format is below;</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>health_expenditure_transformed</span> <span class='op'>&lt;-</span> <span class='va'>health_expenditure</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>state</span>, <span class='va'>item_desc</span>, <span class='va'>s8q6</span><span class='op'>)</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>item_desc</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='st'>"HEALTH EXPENDITURES (EXCLUDING"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>   <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>state_names <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/case_when.html'>case_when</a></span><span class='op'>(</span></span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>1</span> <span class='op'>~</span> <span class='st'>"Abia"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>2</span> <span class='op'>~</span> <span class='st'>"Adamawa"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>3</span> <span class='op'>~</span> <span class='st'>"Akwa Ibom"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>4</span> <span class='op'>~</span> <span class='st'>"Anambra"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>5</span> <span class='op'>~</span> <span class='st'>"Bauchi"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>6</span> <span class='op'>~</span> <span class='st'>"Bayelsa"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>7</span> <span class='op'>~</span> <span class='st'>"Benue"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>8</span> <span class='op'>~</span> <span class='st'>"Borno"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>9</span> <span class='op'>~</span> <span class='st'>"Cross River"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>10</span> <span class='op'>~</span> <span class='st'>"Delta"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>11</span> <span class='op'>~</span> <span class='st'>"Ebonyi"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>12</span> <span class='op'>~</span> <span class='st'>"Edo"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>13</span> <span class='op'>~</span> <span class='st'>"Ekiti"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>14</span> <span class='op'>~</span> <span class='st'>"Enugu"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>15</span> <span class='op'>~</span> <span class='st'>"Gombe"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>16</span> <span class='op'>~</span> <span class='st'>"Imo"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>17</span> <span class='op'>~</span> <span class='st'>"Jigawa"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>18</span> <span class='op'>~</span> <span class='st'>"Kaduna"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>19</span> <span class='op'>~</span> <span class='st'>"Kano"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>20</span> <span class='op'>~</span> <span class='st'>"Katsina"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>21</span> <span class='op'>~</span> <span class='st'>"Kebbi"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span><span class='fl'>22</span> <span class='op'>~</span> <span class='st'>"Kogi"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>23</span> <span class='op'>~</span> <span class='st'>"Kwara"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>24</span> <span class='op'>~</span> <span class='st'>"Lagos"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>25</span> <span class='op'>~</span> <span class='st'>"Nasarawa"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>26</span> <span class='op'>~</span> <span class='st'>"Niger"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>27</span> <span class='op'>~</span> <span class='st'>"Ogun"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>28</span> <span class='op'>~</span> <span class='st'>"Ondo"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>29</span> <span class='op'>~</span> <span class='st'>"Osun"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>30</span> <span class='op'>~</span> <span class='st'>"Oyo"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>31</span> <span class='op'>~</span> <span class='st'>"Plateau"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>32</span> <span class='op'>~</span> <span class='st'>"Rivers"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>33</span> <span class='op'>~</span> <span class='st'>"Sokoto"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>34</span> <span class='op'>~</span> <span class='st'>"Taraba"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>35</span> <span class='op'>~</span> <span class='st'>"Yobe"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>36</span> <span class='op'>~</span> <span class='st'>"Zamfara"</span>,</span>
<span>     <span class='va'>state</span> <span class='op'>==</span> <span class='fl'>37</span> <span class='op'>~</span> <span class='st'>"FCT Abuja"</span><span class='op'>)</span></span>
<span>   <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>state_names</span><span class='op'>)</span> </span>
<span></span>
<span>  <span class='va'>health_expenditure_transformed</span> <span class='op'>&lt;-</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarize</a></span><span class='op'>(</span><span class='va'>health_expenditure_transformed</span>, Monthly_mean_health_expenditure <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>s8q6</span><span class='op'>/</span><span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span></span>
<span> </span>
<span> <span class='fu'><a href='https://rdrr.io/pkg/DT/man/datatable.html'>datatable</a></span><span class='op'>(</span><span class='va'>health_expenditure_transformed</span><span class='op'>)</span></span></code></pre>
</div>
<div id="htmlwidget-94cd708347793f7fe45b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-94cd708347793f7fe45b">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36"],["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT Abuja","Gombe","Imo","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],[1312.24489795918,425.177304964539,1457.14285714286,607.31981981982,488.032581453634,2423.78787878788,981.971326164875,1757.24637681159,1543.31223628692,501.530612244898,2266.40211640212,617.578125,309.375,1538.81355932203,666.666666666667,605.263157894737,1542.1568627451,914.416666666667,645.963302752294,461.011904761905,1024.44444444444,986.041666666667,1214.06593406593,1175,921.111111111111,671.03825136612,1690.47619047619,670.575396825397,779.651162790698,847.02380952381,670.833333333333,1136.11111111111,467.105263157895,263.541666666667,773.666666666667,182.47619047619]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>state_names<\/th>\n      <th>Monthly_mean_health_expenditure<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Now, we have transformed both datasets and we need to verify if they are equal in terms of number of rows and columns before joining together for further analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>fuel_expenditure_transformed</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 37</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>health_expenditure_transformed</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 36</code></pre>
</div>
<p>We will realize that the number of rows are different for fuel_expenditure_transformed (37) and health_expenditure_transformed (36). This is a common occurrence in data exploration and preparation. There is a state without data in health_expenditure_transformed. If we are to inspect the data, we will realize that there is no record for Jigawa state. This is an instance where we face the decision of either employing a data imputation method to provide values for Jigasaw or leaving it out altogether. We will tackle data imputation in a different post. For now, the better choice will be to leave Jigawa state out of the analysis. So we will remove the row for Jigawa state in fuel_expenditure_transformed in order to have 36 rows for both datasets and join them together. Then, we will convert the column <strong>“state_names”</strong> to row names for labeling the cluster leafs to be more meaningful. The code to achieve that is as follows;</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>dataset_all</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset.data.frame</a></span><span class='op'>(</span><span class='va'>fuel_expenditure_transformed</span>, <span class='va'>fuel_expenditure_transformed</span><span class='op'>$</span><span class='va'>state</span> <span class='op'>!=</span> <span class='fl'>17</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate-joins.html'>left_join</a></span><span class='op'>(</span><span class='va'>health_expenditure_transformed</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  <span class='co'>## join the two datasets</span></span>
<span>  <span class='fu'>tibble</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/rownames.html'>column_to_rownames</a></span><span class='op'>(</span>var <span class='op'>=</span> <span class='st'>"state_names"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'>## transform variable state_names to rownames</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span> <span class='co'>## select all columns except the first one (state) which we don't need again</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/DT/man/datatable.html'>datatable</a></span><span class='op'>(</span><span class='va'>dataset_all</span><span class='op'>)</span></span></code></pre>
</div>
<div id="htmlwidget-aaf5fb1bdb7326af919b" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-aaf5fb1bdb7326af919b">{"x":{"filter":"none","data":[["Abia","Anambra","Lagos","Akwa Ibom","Adamawa","Ebonyi","Cross River","Bauchi","Taraba","Plateau","Bayelsa","Kogi","Benue","Borno","Nasarawa","Delta","Edo","Ekiti","Enugu","Niger","Gombe","Imo","Rivers","Kwara","Kaduna","Kano","Zamfara","Katsina","Kebbi","Osun","Ogun","Ondo","Sokoto","Oyo","FCT Abuja","Yobe"],[1061.59574468085,1078.50515463918,924.621212121212,1425.44117647059,529.166666666667,523.776978417266,717.173913043478,564.230769230769,456.086956521739,522,1139.18367346939,652.554347826087,348.5,678.571428571429,705,915.097345132743,877.349397590361,734.366666666667,620.630630630631,341.428571428571,689.473684210526,697.183908045977,1274.94505494505,630.909090909091,563.378378378378,633.695652173913,361.643835616438,446.666666666667,244.117647058824,819.857142857143,870.210526315789,870.978260869565,219.2,981.875,1825,260],[3781.11111111111,2523.15789473684,4760.30303030303,5087.40740740741,3290,2948.07692307692,4168.18181818182,2161.53846153846,2039.18918918919,4387.74193548387,4690.90909090909,2704.73684210526,2243,3338.63636363636,3622.5,4392.19512195122,2893.47826086957,4342.5,3452.4,2855.2380952381,8012.28571428571,2647.95454545455,3605.61224489796,3648.52941176471,2403.22580645161,2691.37931034483,1092.55319148936,3990.71428571429,3073.81395348837,3907.27272727273,4548.97959183673,6020.17543859649,7411.11111111111,6099.775,10010,3400],[1312.24489795918,607.31981981982,1175,1457.14285714286,425.177304964539,2266.40211640212,1543.31223628692,488.032581453634,263.541666666667,670.833333333333,2423.78787878788,986.041666666667,981.971326164875,1757.24637681159,921.111111111111,501.530612244898,617.578125,309.375,1538.81355932203,671.03825136612,605.263157894737,1542.1568627451,1136.11111111111,1214.06593406593,914.416666666667,645.963302752294,182.47619047619,461.011904761905,1024.44444444444,779.651162790698,1690.47619047619,670.575396825397,467.105263157895,847.02380952381,666.666666666667,773.666666666667]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>KEROSENE<\/th>\n      <th>PETROL<\/th>\n      <th>Monthly_mean_health_expenditure<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Now our data is ready for analysis!. But before then, we have to do clustering relevant data preparation</p>
<h4 id="clustering-relevant-data-preparation">Clustering relevant data preparation</h4>
<p>The data preparation done at this stage is not one that we will do for all types of analysis. We are doing them in order to successfully undertake a clustering analysis that is appropriate.</p>
<ul>
<li><p>Data standardization: Before applying various clustering algorithms, we need to standardize the data to have mean zero and standard deviation one. This is done to make our variables have a common scale hence comparable.</p></li>
<li><p>Computation of dissimilarity measure: This is done to identify observations that belong to the same clusters.</p></li>
</ul>
<p>Now, let’s write our code for that;</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## scale the data</span></span>
<span> <span class='va'>dataset_all_scaled</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/scale.html'>scale</a></span><span class='op'>(</span><span class='va'>dataset_all</span><span class='op'>)</span></span>
<span> </span>
<span> <span class='co'>## calculate dissimilarity </span></span>
<span> <span class='va'>dataset_dissimilarity</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/dist.html'>dist</a></span><span class='op'>(</span><span class='va'>dataset_all_scaled</span>, method <span class='op'>=</span> <span class='st'>"euclidean"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>We will use all the clustering methods we have discussed above and compare the results.</p>
<h2 id="agglomerative-nesting-agnes">Agglomerative Nesting (AGNES)</h2>
<p>Agglomerative nesting can be undertaken using hclust(), flashClust or agnes()</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## hierarchical clustering wtih complete linkage</span></span>
<span><span class='va'>hcl_complete</span><span class='op'>&lt;-</span>  <span class='fu'><a href='https://rdrr.io/r/stats/hclust.html'>hclust</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span>, method <span class='op'>=</span> <span class='st'>"complete"</span><span class='op'>)</span></span>
<span> </span>
<span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hcl_complete</span>, cex <span class='op'>=</span> <span class='fl'>0.6</span>, hang <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span> </span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/hcl-complete-1.png" width="624" /></p>
</div>
<p>Using agnes() function gives us the agglomerative co-efficient (ac) which measures the strength of clustering. The higher the ac, the stronger the clustering structure.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## agnes clustering</span></span>
<span><span class='va'>agnes_complete</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/cluster/man/agnes.html'>agnes</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span>, method <span class='op'>=</span> <span class='st'>"complete"</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>agnes_complete</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-comp-1.png" width="624" /><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-comp-2.png" width="624" /></p>
</div>
<p>Now, let’s look at other methods we have discussed for AGNES.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## compute agnes clustering with various methods</span></span>
<span><span class='va'>agnes_single</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/cluster/man/agnes.html'>agnes</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span>, method <span class='op'>=</span> <span class='st'>"single"</span><span class='op'>)</span></span>
<span><span class='va'>agnes_average</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/cluster/man/agnes.html'>agnes</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span>, method <span class='op'>=</span> <span class='st'>"average"</span><span class='op'>)</span></span>
<span><span class='va'>agnes_ward</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/cluster/man/agnes.html'>agnes</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span>, method <span class='op'>=</span> <span class='st'>"ward"</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#Plot results</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>agnes_single</span><span class='op'>)</span></span></code></pre>
</div>
<img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-1.png" width="624" /><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>agnes_average</span><span class='op'>)</span></span></code></pre>
</div>
<img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-3.png" width="624" /><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>agnes_ward</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-5.png" width="624" /><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/agnes-method-6.png" width="624" /></p>
</div>
<p>From the various methods, agnes with the ward method produces an ac of 0.9 which is the highest compared to others hence depicts the strongest structure.</p>
<p>Before we draw the curtains down on agnes, let’s also note that hcluster() function also accepts other methods</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>hclust_mcquitty</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/hclust.html'>hclust</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span>, method <span class='op'>=</span> <span class='st'>"mcquitty"</span><span class='op'>)</span></span>
<span><span class='va'>hclust_median</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/hclust.html'>hclust</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span>, method <span class='op'>=</span> <span class='st'>"median"</span><span class='op'>)</span></span>
<span><span class='va'>hclust_centriod</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/hclust.html'>hclust</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span>, method <span class='op'>=</span> <span class='st'>"centroid"</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hclust_mcquitty</span>, cex <span class='op'>=</span> <span class='fl'>0.6</span>, hang <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span></span></code></pre>
</div>
<img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/hcl-methods-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hclust_median</span>, cex <span class='op'>=</span> <span class='fl'>0.6</span>, hang <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span></span></code></pre>
</div>
<img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/hcl-methods-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hclust_centriod</span>, cex <span class='op'>=</span> <span class='fl'>0.6</span>, hang <span class='op'>=</span> <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/hcl-methods-3.png" width="624" /></p>
</div>
<h2 id="divisive-clustering">Divisive clustering</h2>
<p>Divisive clustering does not require a method argument to be specified. let’s analyze the data using diana() function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#### divisive clustering</span></span>
<span><span class='co'># computes divisive hierarchical clustering</span></span>
<span><span class='va'>divisive_cluster</span> <span class='op'>&lt;-</span> <span class='fu'>cluster</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/cluster/man/diana.html'>diana</a></span><span class='op'>(</span><span class='va'>dataset_dissimilarity</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># divisive coefficient -- amount of clustering structure found</span></span>
<span><span class='va'>divisive_cluster</span><span class='op'>$</span><span class='va'>dc</span></span></code></pre>
</div>
<pre><code>[1] 0.8510366</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#plot dendrogram for divisive clustering</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/cluster/man/pltree.html'>pltree</a></span><span class='op'>(</span><span class='va'>divisive_cluster</span>, cex <span class='op'>=</span> <span class='fl'>0.6</span>, hang <span class='op'>=</span> <span class='fl'>.2</span>, main <span class='op'>=</span> <span class='st'>"Dendrogram of diana"</span><span class='op'>)</span></span></code></pre>
</div>
<img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/divisive-hcl-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>divisive_cluster</span><span class='op'>$</span><span class='va'>dc</span></span></code></pre>
</div>
<pre><code>[1] 0.8510366</code></pre>
</div>
<p>The divisive co-efficient (dc) is computed to be 0.85 which indicates strong clustering structure. The ac and dc are measured on a scale of 0 to 1 with lower values close to 0 indicating weak clustering and higher values close to 1 indicating strong cluster structure.</p>
<h4 id="identifying-clusters-of-subgroups">Identifying clusters of subgroups</h4>
<p>We can identify observations that falls into similar groups or otherwise by stating the number of groups we want to cut into. let’s cut our observations into 5 clusters with the code below. This can be done for both agnes and divise</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># CUT TREE INTO 5 GROUPS</span></span>
<span><span class='va'>hcl_complete_group</span> <span class='op'>&lt;-</span> <span class='fu'>cutree</span><span class='op'>(</span><span class='va'>hcl_complete</span>, k <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>### Number of members in each cluster</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span><span class='va'>hcl_complete_group</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>hcl_complete_group
 1  2  3  4  5 
 8 20  5  2  1 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>##add cluster groupings to data</span></span>
<span><span class='va'>dataset_all_cluster</span> <span class='op'>&lt;-</span> <span class='va'>dataset_all</span><span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>cluster <span class='op'>=</span> <span class='va'>hcl_complete_group</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>We can visualize how the various states are grouped when we cut into 5 clusters using the code below</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## visualize with fviz_cluster</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_cluster.html'>fviz_cluster</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>dataset_all_scaled</span>, cluster <span class='op'>=</span> <span class='va'>hcl_complete_group</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/viz-clust-1.png" width="624" /></p>
</div>
<h4 id="comparing-dendrograms">Comparing dendrograms</h4>
<p>We can compare clustering based on different methods by creating dendrogram objects for them and plotting.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>### create dendrogram object</span></span>
<span><span class='va'>agnes_complete_dendrogram</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/dendrogram.html'>as.dendrogram</a></span><span class='op'>(</span><span class='va'>agnes_complete</span><span class='op'>)</span></span>
<span><span class='va'>agnes_ward_dendrogram</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/dendrogram.html'>as.dendrogram</a></span><span class='op'>(</span><span class='va'>agnes_ward</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>### plot the dendrograms to compare and match</span></span>
<span><span class='fu'><a href='http://talgalili.github.io/dendextend/reference/tanglegram.html'>tanglegram</a></span><span class='op'>(</span><span class='va'>agnes_complete_dendrogram</span>, <span class='va'>agnes_ward_dendrogram</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/tangle-plot-1.png" width="624" /></p>
</div>
<p>The dashed lines show cluster combinations different from others.</p>
<h4 id="customizing-the-dendrogram">Customizing the dendrogram</h4>
<p>Visualizing results has never been less important for cluster analysis where observations are grouped and there is the need for more colourful differentiation of groups to better understand the results presented. There are options for this. First, we can chain multiple dendrograms together to customize them easily.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># create a dendlist</span></span>
<span><span class='va'>dend_list_agnes_complete_ward</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://talgalili.github.io/dendextend/reference/dendlist.html'>dendlist</a></span><span class='op'>(</span><span class='va'>agnes_complete_dendrogram</span>, <span class='va'>agnes_ward_dendrogram</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='http://talgalili.github.io/dendextend/reference/tanglegram.html'>tanglegram</a></span><span class='op'>(</span>dend1 <span class='op'>=</span> <span class='va'>agnes_complete_dendrogram</span>, dend2 <span class='op'>=</span> <span class='va'>agnes_ward_dendrogram</span>,</span>
<span>           highlight_distinct_edges <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># Turn off dashed lines</span></span>
<span>           common_subtrees_color_lines <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># turn-off line colors</span></span>
<span>           common_subtrees_color_branches <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># color common branches</span></span>
<span>           highlight_branches_col <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>           main_left <span class='op'>=</span> <span class='st'>"Agglomerative Nesting (complete method)"</span>,</span>
<span>           main_right <span class='op'>=</span> <span class='st'>"Agglomerative Nesting (ward method)"</span>,</span>
<span>           sub <span class='op'>=</span> <span class='st'>"Expenditure on Petrol, Kerosene and Health -States in Nigeria"</span>,</span>
<span>           cex_main_left <span class='op'>=</span> <span class='fl'>1.1</span>,</span>
<span>           cex_main <span class='op'>=</span> <span class='fl'>0.8</span>,</span>
<span>            cex_sub <span class='op'>=</span> <span class='fl'>.6</span>,</span>
<span>           lab.cex <span class='op'>=</span> <span class='fl'>1</span>,</span>
<span>            margin_inner <span class='op'>=</span> <span class='fl'>5</span>,</span>
<span>           main <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Entanglement = "</span>, <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fu'><a href='http://talgalili.github.io/dendextend/reference/entanglement.html'>entanglement</a></span><span class='op'>(</span><span class='va'>dend_list_agnes_complete_ward</span><span class='op'>)</span>, <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/customize-dendro-1.png" width="768" data-distill-preview=1 />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>agnes_complete_dendrogram</span></span></code></pre>
</div>
<pre><code>&#39;dendrogram&#39; with 2 branches and 36 members total, at height 6.648864 </code></pre>
</div>
<p>We have added entanglement co-efficient to the graph. It measures how well-align the trees are on a scale of 0 to 1. The low co-oefficient of 0.17 indicates low entanglement with good alignment.</p>
<h2 id="determining-optimal-number-of-clusters">Determining optimal number of clusters</h2>
<p>A number of methods can be used to determine the optimal number of clusters for grouping</p>
<h4 id="elbow-method-of-determing-optimal-number-of-clusters">Elbow method of determing optimal number of clusters</h4>
<p>To determine optimal number of clusters with elbow method, we need to look at where the bend is located which can be gauged to be 3 from our analysis below</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>dataset_all_scaled</span>, FUN <span class='op'>=</span> <span class='va'>hcut</span>, method <span class='op'>=</span> <span class='st'>"wss"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/elbow-method-1.png" width="624" /></p>
</div>
<h4 id="average-silhouette-method">Average silhouette method</h4>
<p>Average silhouette method indicates how well the clusters form with within cluster difference minimized at the optimal cluster number. Thus, the highest average silhouette width corresponds to the optimal number of clusters.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_nbclust</a></span><span class='op'>(</span><span class='va'>dataset_all_scaled</span>, FUN <span class='op'>=</span> <span class='va'>hcut</span>, method <span class='op'>=</span> <span class='st'>"silhouette"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/silhoutte-method-1.png" width="624" /></p>
</div>
<p>From the plot above, the optimal number of clusters is 3.</p>
<h4 id="gap-statistics-method">Gap statistics method</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>dataset_gapstat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/cluster/man/clusGap.html'>clusGap</a></span><span class='op'>(</span><span class='va'>dataset_all_scaled</span>, FUN <span class='op'>=</span> <span class='va'>hcut</span>, K.max <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/factoextra/man/fviz_nbclust.html'>fviz_gap_stat</a></span><span class='op'>(</span><span class='va'>dataset_gapstat</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/gap-stat-method-1.png" width="624" /></p>
</div>
<p>The gaps method identified 1 to be the optimal number of clusters within a range of 1 to 10 clusters. Well, as we can deduce, different methods can identify different number of optimal clusters. With 2 of the methods suggesting 3 to be the optimal number of clusters, we can go by that.</p>
<p>Now that we know the optimal number of clusters, let’s use that to visualize the data but in a way different from the previous.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Cut the dendrogram into 4 clusters</span></span>
<span><span class='va'>colors</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"brown"</span>, <span class='st'>"orange"</span>, <span class='st'>"#1DEfbb"</span>, <span class='st'>"yellow"</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>ward_cut</span> <span class='op'>&lt;-</span> <span class='fu'>cutree</span><span class='op'>(</span><span class='va'>hcl_complete</span>, k <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/ape/man/as.phylo.html'>as.phylo</a></span><span class='op'>(</span><span class='va'>hcl_complete</span><span class='op'>)</span>, type <span class='op'>=</span> <span class='st'>"fan"</span>, tip.color <span class='op'>=</span> <span class='va'>colors</span><span class='op'>[</span><span class='va'>ward_cut</span><span class='op'>]</span>, label.offset <span class='op'>=</span> <span class='fl'>.5</span>, cex <span class='op'>=</span> <span class='fl'>0.7</span>, no.margin <span class='op'>=</span> <span class='cn'>TRUE</span>, use.edge.length <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile_files/figure-html5/fan-dendrogram-1.png" width="624" /></p>
</div>
<h2 id="conclusion">Conclusion</h2>
<p>With this simple exercise, we learnt how to undertake hierarchical clustering analysis using a project that is typical of the real world. We went through process of data wrangling and transformation, clustering and determining the optimal number of clusters.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="disqus-comments">
      <i class="fas fa-comments"></i>
      &nbsp;
      <span class="disqus-comment-count" data-disqus-identifier="posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/">Comment on this article</span>
    </span>
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://twitter.com/share?text=Hierarchical%20clustering%20--%20Which%20states%20in%20Nigeria%20have%20similar%20expenditure%20profile%3F&amp;url=https%3A%2F%2Faddurl%2Fposts%2F2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile%2F" aria-label="share on twitter">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Faddurl%2Fposts%2F2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile%2F&amp;title=Hierarchical%20clustering%20--%20Which%20states%20in%20Nigeria%20have%20similar%20expenditure%20profile%3F" aria-label="share on linkedin">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
      <a href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Faddurl%2Fposts%2F2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile%2F" aria-label="share on facebook">
        <i class="fab fa-facebook" aria-hidden="true"></i>
      </a>
      <a href="https://plus.google.com/share?url=https%3A%2F%2Faddurl%2Fposts%2F2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile%2F" aria-label="share on google-plus">
        <i class="fab fa-google-plus" aria-hidden="true"></i>
      </a>
      <a href="https://pinterest.com/pin/create/link/?url=https%3A%2F%2Faddurl%2Fposts%2F2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile%2F&amp;description=Hierarchical%20clustering%20--%20Which%20states%20in%20Nigeria%20have%20similar%20expenditure%20profile%3F" aria-label="share on pinterest">
        <i class="fab fa-pinterest" aria-hidden="true"></i>
      </a>
    </span>
  </p>
  <script id="dsq-count-scr" src="https://datasiast.disqus.com/count.js" async></script>
  <div id="disqus_thread"></div>
  <script type="text/javascript" cookie-consent="functionality">
var disqus_config = function () {
  this.page.url = 'https://addurl/posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/';
  this.page.identifier = 'posts/2022-07-20-hierarchical-clustering-which-states-in-nigeria-have-similar-expenditure-profile/';
};
(function() {
  var d = document, s = d.createElement('script');
  s.src = 'https://datasiast.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
  <p>
    <div class="subscribe"><form method='post' action='https://blogtrottr.com'>
  <p>Enjoy this blog? Get notified of new posts via email:</p>
  <input type='text' name='btr_email' />
  <input type='hidden' name='btr_url'
         value='https://beta.rstudioconnect.com/content/11424/index.xml'/>
  <input type='hidden' name='schedule_type' value='0' />
  <input type='submit' value='Subscribe' />
</form>
</div>
  </p>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
